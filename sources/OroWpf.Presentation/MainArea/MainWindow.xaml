<Window
    x:Class="DustInTheWind.OroWpf.Presentation.MainArea.MainWindow"
    
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:clockWpf="clr-namespace:DustInTheWind.ClockWpf;assembly=DustInTheWind.ClockWpf"
    xmlns:mainArea="clr-namespace:DustInTheWind.OroWpf.Presentation.MainArea"
    xmlns:customControls="clr-namespace:DustInTheWind.OroWpf.Presentation.CustomControls;assembly=DustInTheWind.OroWpf.Presentation.CustomControls"
    xmlns:presentation="clr-namespace:DustInTheWind.OroWpf.Presentation"
    
    mc:Ignorable="d"
    SizeToContent="WidthAndHeight"
    WindowStyle="None"
    AllowsTransparency="True"
    Background="Transparent"
    ResizeMode="CanResize"
    d:DataContext="{d:DesignInstance mainArea:MainViewModel}"
    Topmost="{Binding KeepOnTop}"
    mainArea:WindowLocationBehavior.Settings="{Binding Settings}"
    mainArea:WindowLocationBehavior.ContainerElement="{Binding ElementName=MainContainer}"
    mainArea:WindowDragBehavior.EnableDrag="True">

    <Window.Resources>
        <presentation:QuarterSizeConverter x:Key="QuarterSizeConverter"/>
    </Window.Resources>

    <Grid
        x:Name="MainContainer"
        Width="400"
        Height="400">

        <customControls:CornerButton
            x:Name="SettingsButton"
            Width="{Binding ActualWidth, ElementName=MainContainer, Converter={StaticResource QuarterSizeConverter}}"
            Height="{Binding ActualHeight, ElementName=MainContainer, Converter={StaticResource QuarterSizeConverter}}"
            HorizontalAlignment="Left"
            VerticalAlignment="Top"
            Cursor="Hand"
            Visibility="{Binding IsNavigationVisible, Converter={StaticResource BooleanToVisibilityConverter}}"
            Command="{Binding SettingsCommand}"
            IsActive="{Binding IsSettingsPageActive}"
            Corner="TopLeft"
            CornerRadius="0.05">

            <!-- Settings Icon -->
            <Path
                Data="M 12,0 L 14,0 L 14.5,2.5 L 17,3.5 L 19,2 L 20.5,3.5 L 19,5.5 L 20.5,8 L 23,8.5 L 23,10.5 L 20.5,11 L 19,13.5 L 20.5,15.5 L 19,17 L 17,15.5 L 14.5,16.5 L 14,19 L 12,19 L 11.5,16.5 L 9,15.5 L 7,17 L 5.5,15.5 L 7,13.5 L 5.5,11 L 3,10.5 L 3,8.5 L 5.5,8 L 7,5.5 L 5.5,3.5 L 7,2 L 9,3.5 L 11.5,2.5 Z M 13,6 A 3.5,3.5 0 1 0 13,13 A 3.5,3.5 0 1 0 13,6 Z"
                Fill="White"
                Stretch="Uniform"
                Width="25"/>

        </customControls:CornerButton>

        <customControls:CornerButton
            x:Name="CloseButton"
            Width="{Binding ActualWidth, ElementName=MainContainer, Converter={StaticResource QuarterSizeConverter}}"
            Height="{Binding ActualHeight, ElementName=MainContainer, Converter={StaticResource QuarterSizeConverter}}"
            HorizontalAlignment="Right"
            VerticalAlignment="Top"
            Cursor="Hand"
            Visibility="{Binding IsNavigationVisible, Converter={StaticResource BooleanToVisibilityConverter}}"
            Command="{Binding AppCloseCommand}"
            Corner="TopRight"
            CornerRadius="0.05"
            HoverBackground="Red">

            <!-- X Icon -->
            <Path
                Data="M 0,0 L 1,1 M 1,0 L 0,1"
                Stroke="White"
                StrokeThickness="3"
                StrokeStartLineCap="Round"
                StrokeEndLineCap="Round"
                Stretch="Uniform"
                Width="18"/>

        </customControls:CornerButton>

        <customControls:CornerThumb
            x:Name="ResizeGrip"
            Width="{Binding ActualWidth, ElementName=MainContainer, Converter={StaticResource QuarterSizeConverter}}"
            Height="{Binding ActualHeight, ElementName=MainContainer, Converter={StaticResource QuarterSizeConverter}}"
            Visibility="{Binding IsNavigationVisible, Converter={StaticResource BooleanToVisibilityConverter}}"
            DragDelta="ResizeGrip_DragDelta"
            CornerRadius="0.05" />

        <ContentControl
            HorizontalAlignment="Stretch"
            VerticalAlignment="Stretch"
            Content="{Binding CurrentPage}"
            IsTabStop="False">

        </ContentControl>

    </Grid>

</Window>
